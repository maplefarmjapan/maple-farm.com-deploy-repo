<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Maple Farm</title><style>
:root {
/* Light mode colors */
--bg-primary: #f0f0f0;
--bg-secondary: white;
--bg-section: #fff;
--text-primary: #333;
--text-secondary: #666;
--border-color: #ddd;
--shadow-color: rgba(0, 0, 0, 0.1);
--nav-bg: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
--nav-hover: rgba(255, 255, 255, 0.1);
--nav-active: rgba(255, 255, 255, 0.2);
--carousel-bg: #f8f8f8;
--calendar-bg: #f5f5f5;
--button-bg: rgba(0, 0, 0, 0.5);
}
[data-theme="dark"] {
/* Dark mode colors */
--bg-primary: #1a1a1a;
--bg-secondary: #2d2d2d;
--bg-section: #2d2d2d;
--text-primary: #e0e0e0;
--text-secondary: #b0b0b0;
--border-color: #404040;
--shadow-color: rgba(0, 0, 0, 0.3);
--nav-bg: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
--nav-hover: rgba(255, 255, 255, 0.15);
--nav-active: rgba(255, 255, 255, 0.25);
--carousel-bg: #3d3d3d;
--calendar-bg: #3d3d3d;
--button-bg: rgba(0, 0, 0, 0.7);
}
body {
font-family: Arial, sans-serif;
margin: 0;
padding: 0;
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
min-height: 100vh;
background-color: var(--bg-primary);
color: var(--text-primary);
transition: background-color 0.3s ease, color 0.3s ease;
}
.iframe-container {
position: relative;
width: 100%;
max-width: 1200px;  /* Limits the maximum width of the iframe */
padding-bottom: 56.25%; /* 16:9 aspect ratio (height/width ratio = 9/16 = 56.25%) */
height: 0;
overflow: hidden;
z-index: 1;
}
.iframe-container iframe {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
border: none;
}
.container {
max-width: 1200px;
width: 100%;
padding: 10px;
box-sizing: border-box;
background-color: var(--bg-secondary);
box-shadow: 0 4px 8px var(--shadow-color);
transition: background-color 0.3s ease, box-shadow 0.3s ease;
}
nav {
width: 100%;
background: var(--nav-bg);
overflow: visible;
position: sticky;
top: 0;
z-index: 100;
box-shadow: 0 2px 4px var(--shadow-color);
transition: all 0.3s ease;
}
nav ul {
list-style: none;
padding: 0;
margin: 0;
display: flex;
justify-content: space-around;
}
nav ul li {
display: inline-block;
width: 100%;
text-align: center;
max-width: 250px; /* Ensures menu items are not too wide */
box-sizing: border-box;
}
nav ul li a {
color: white;
text-decoration: none;
padding: 8px 12px;
display: block;
text-align: center;
white-space: nowrap; /* Prevents text from wrapping */
overflow: hidden; /* Ensures no overflow */
text-overflow: ellipsis; /* Adds "..." if text is too long */
transition: all 0.3s ease;
border-radius: 4px;
margin: 1px;
font-weight: 500;
font-size: 14px;
}
nav ul li a:hover {
background-color: var(--nav-hover);
transform: translateY(-1px);
box-shadow: 0 2px 4px var(--shadow-color);
}
section {
padding: 60px 20px;
margin: 20px 0;
background-color: var(--bg-section);
border: 1px solid var(--border-color);
box-shadow: 0 4px 8px var(--shadow-color);
transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
position: relative;
}
h1 {
margin: 0 0 20px;
text-align: center;
}
h2 {
text-align: center;
margin-bottom: 30px;
position: relative;
}
.back-to-top {
position: absolute;
right: 20px;
top: 20px;
text-decoration: none;
font-size: 18px;
opacity: 0.3;
color: var(--text-secondary);
transition: opacity 0.3s ease, transform 0.2s ease;
cursor: pointer;
z-index: 10;
}
.back-to-top:hover {
opacity: 0.7;
transform: scale(1.1);
}
@media (max-width: 600px) {
.back-to-top {
right: 10px;
top: 10px;
font-size: 16px;
}
}
p {
max-width: 800px;
margin: 0 auto 20px;
text-align: center;
line-height: 1.6;
}
p:last-child {
margin-bottom: 0;
}
.grid-container {
display: grid;
grid-template-columns: repeat(2, 1fr);
gap: 20px;
max-width: 1000px;
margin: 0 auto;
}
@media (min-width: 768px) {
.grid-container {
grid-template-columns: repeat(4, 1fr);
}
}
@media (min-width: 1200px) {
.grid-container {
grid-template-columns: repeat(5, 1fr);
}
}
.grid-item {
background-color: var(--bg-primary);
border: 1px solid var(--border-color);
border-radius: 12px;
padding: 20px;
text-align: left;
box-shadow: 0 2px 4px var(--shadow-color);
transition: all 0.3s ease;
}
.grid-item:hover {
transform: translateY(-2px);
box-shadow: 0 4px 8px var(--shadow-color);
}
.grid-item strong {
display: block;
margin-bottom: 8px;
color: var(--text-primary);
font-size: 16px;
}
.grid-item p {
margin: 0;
font-size: 14px;
line-height: 1.4;
text-align: left;
max-width: none;
}
.footer {
margin-top: 40px;
padding: 20px 0;
text-align: center;
font-size: 14px;
color: var(--text-secondary);
border-top: 1px solid var(--border-color);
background-color: var(--bg-primary);
transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
}
.carousel {
position: relative;
max-width: 100%;
overflow: hidden;
margin: 0 auto;
width: 100%;
}
.carousel-images {
display: flex;
transition: transform 0.5s ease-in-out;
}
.carousel-images img {
width: 100%;
min-width: 100%;
height: 500px;
object-fit: contain;
object-position: center;
background-color: var(--carousel-bg);
border-radius: 8px;
box-shadow: 0 2px 8px var(--shadow-color);
flex-shrink: 0;
display: block;
transition: background-color 0.3s ease, box-shadow 0.3s ease;
}
.carousel button {
position: absolute;
top: 50%;
transform: translateY(-50%);
background-color: var(--button-bg);
color: white;
border: none;
padding: 10px;
cursor: pointer;
transition: background-color 0.3s ease;
}
.carousel button.prev {
left: 10px;
}
.carousel button.next {
right: 10px;
}
.hamburger {
display: none;
background: transparent;
border: none;
cursor: pointer;
padding: 10px;
position: relative;
margin-right: 10px;
z-index: 101;
}
.hamburger span {
display: block;
width: 25px;
height: 3px;
margin: 5px 0;
background-color: white;
transition: all 0.3s ease;
}
.hamburger.active span:nth-child(1) {
transform: rotate(45deg) translate(5px, 5px);
}
.hamburger.active span:nth-child(2) {
opacity: 0;
}
.hamburger.active span:nth-child(3) {
transform: rotate(-45deg) translate(7px, -6px);
}
.nav-links {
display: block;
}
.dark-mode-toggle {
background: transparent;
border: none;
color: white;
font-size: 18px;
cursor: pointer;
padding: 6px 10px;
border-radius: 6px;
position: absolute;
right: 20px;
top: 50%;
transform: translateY(-50%);
transition: background-color 0.3s ease, opacity 0.2s ease;
z-index: 102;
}
.dark-mode-toggle:hover {
background-color: var(--nav-hover);
opacity: 0.8;
}
@media (max-width: 600px) {
.hamburger {
display: block;
}
.dark-mode-toggle {
left: 20px;
right: auto;
font-size: 16px;
padding: 4px 8px;
}
nav {
position: relative;
min-height: 50px;
display: flex;
align-items: center;
justify-content: flex-end;
}
.nav-links {
display: none;
position: fixed;
top: 50px;
left: 0;
right: 0;
background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
z-index: 99;
}
.nav-links.active {
display: block;
}
nav ul {
flex-direction: column; /* Stack menu items vertically */
align-items: stretch;    /* Full width items */
}
nav ul li {
width: 100%; /* Make sure the menu item takes up full width */
max-width: none; /* Remove the max-width constraint on small screens */
}
nav ul li a {
padding: 16px 20px;
border-radius: 0;
font-size: 16px;
}
h1 {
font-size: 24px;
}
p {
font-size: 16px;
}
.iframe-container {
max-width: 100%; /* Use full available width */
margin: 0; /* Remove margins */
padding-bottom: 120%; /* Taller aspect ratio for better calendar view on mobile */
height: auto;
}
#calendar-container {
padding-bottom: 120%; /* Increased height for better calendar visibility */
}
section {
padding: 40px 5px; /* Minimal horizontal padding on mobile */
}
#section3 {
padding: 40px 2px; /* Even less padding for calendar section */
}
.carousel-images img {
height: 300px; /* Smaller height for mobile */
}
}
</style></head><body><div class="container" id="top"><h1>Maple Farm</h1><p>Welcome to Maple Farm.</p><p>We hope that you will discover lots of useful information here about Maple Farm and the surrounding area.</p><nav id="mainNav"><button class="dark-mode-toggle" id="darkModeToggle" onclick="toggleDarkMode()" title="Toggle dark mode">
üåô
</button><button class="hamburger" id="hamburger" onclick="toggleMenu()"><span></span><span></span><span></span></button><div class="nav-links" id="navLinks"><ul><li><a href="#section1">üì∏ Photos</a></li><li><a href="#section2">üìç Location</a></li><li><a href="#section3">üìÖ Availability</a></li><li><a href="#section4">üçΩÔ∏è Food & Drink</a></li><li><a href="#section4b">üõí Supermarkets</a></li></ul><ul><li><a href="#section5">üéØ Attractions</a></li><li><a href="#section6">‚ÑπÔ∏è Useful Info</a></li><li><a href="#section7">üöó Transport and Access</a></li><li><a href="#section8">‚õ∑Ô∏è Ski Resorts</a></li><li><a href="#section9">‚ô®Ô∏è Hot Springs</a></li><li><a href="#section10">üè° About</a></li></ul></div></nav><section id="section1"><div class="carousel"><div class="carousel-images"><img src="images/tatami-suite.jpg" alt="Tatami Suite"><img data-src="images/winter-fields.jpeg" alt="Winter Fields"><img data-src="images/microwave-detail.jpg" alt="Microwave Detail"><img data-src="images/house-angle.jpg" alt="House Angle"><img data-src="images/front-entrance.jpg" alt="Front Entrance"><img data-src="images/airplane-sky.jpeg" alt="Airplane Sky"><img data-src="images/bathroom-controls.jpg" alt="Bathroom Controls"><img data-src="images/dining-area.webp" alt="Dining Area"><img data-src="images/vanity-close.jpg" alt="Vanity Close-up"><img data-src="images/bird-box.webp" alt="Bird Box"><img data-src="images/snowy-trees.jpeg" alt="Snowy Trees"><img data-src="images/lone-tree.webp" alt="Lone Tree"><img data-src="images/summer-exterior.jpg" alt="Summer Exterior"><img data-src="images/backlit-path.jpeg" alt="Backlit Path"><img data-src="images/green-tatami.jpg" alt="Green Tatami"><img data-src="images/mountain-vista.jpeg" alt="Mountain Vista"><img data-src="images/large-tatami.webp" alt="Large Tatami"><img data-src="images/winter-vista.jpeg" alt="Winter Vista"><img data-src="images/hallway-view.jpg" alt="Hallway View"><img data-src="images/entrance-hall.jpg" alt="Entrance Hall"><img data-src="images/autumn-trail.jpeg" alt="Autumn Trail"><img data-src="images/country-road.jpeg" alt="Country Road"><img data-src="images/washlet-toilet.webp" alt="Washlet Toilet"><img data-src="images/living-sofa.jpg" alt="Living Room with Sofa"><img data-src="images/japanese-room.jpg" alt="Japanese Room"><img data-src="images/utility-sink.jpg" alt="Utility Sink"><img data-src="images/forest-trail.jpeg" alt="Forest Trail"><img data-src="images/winter-panorama.jpeg" alt="Winter Panorama"><img data-src="images/ningle-terrace.jpeg" alt="Ningle Terrace"><img data-src="images/twin-beds.webp" alt="Twin Beds"><img data-src="images/kitchen-living.webp" alt="Kitchen Living"><img data-src="images/bird-feeder.jpg" alt="Bird Feeder"><img data-src="images/washing-machine.jpg" alt="Washing Machine"><img data-src="images/bathroom-vanity.webp" alt="Bathroom Vanity"><img data-src="images/tatami-bedroom.jpg" alt="Tatami Bedroom"><img data-src="images/living-room.jpg" alt="Living Room"><img data-src="images/maple-farm-logo.webp" alt="Maple Farm Logo"><img data-src="images/bath-garden.jpg" alt="Bath with Garden View"><img data-src="images/spring-mountains.webp" alt="Spring Mountains"><img data-src="images/blue-pond-winter.jpeg" alt="Blue Pond Winter"><img data-src="images/built-in-oven.jpg" alt="Built-in Oven"><img data-src="images/winter-dusk-back-window.jpeg" alt="Winter Dusk Back Window"><img data-src="images/kitchen-wide.jpg" alt="Kitchen Wide View"><img data-src="images/toilet-washbasin.webp" alt="Toilet Washbasin"><img data-src="images/autumn-path.jpeg" alt="Autumn Path"><img data-src="images/rural-autumn.jpeg" alt="Rural Autumn"><img data-src="images/induction-cooktop.webp" alt="Induction Cooktop"><img data-src="images/winter-exterior.jpeg" alt="Winter Exterior"><img data-src="images/bathtub-view.webp" alt="Bathtub with View"><img data-src="images/toilet-room.jpg" alt="Toilet Room"><img data-src="images/kitchen-main.jpg" alt="Main Kitchen"><img data-src="images/wood-stove.jpg" alt="Wood Stove"></div><button class="prev" onclick="prevSlide()">&#10094;</button><button class="next" onclick="nextSlide()">&#10095;</button></section><section id="section2"><a href="#top" class="back-to-top" title="Back to top">‚¨ÜÔ∏è</a><h2>Location</h2><p>Maple Farm is perfectly located just 5 minutes drive from Asahikawa Airport, making it an ideal base for exploring the famous Blue Pond, Patchwork Road, and the beautiful flower fields of Biei.</p><p>The property offers easy access to all major attractions while providing a peaceful countryside setting.</p><div class="iframe-container"><iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2886.7796094681594!2d142.4487049764107!3d43.65275347110216!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x5f0cc3a481c7bcb5%3A0x23ba5a35d4c86629!2sMaple%20Farm!5e0!3m2!1sen!2sjp!4v1729733455200!5m2!1sen!2sjp" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe></div></section><section id="section3"><a href="#top" class="back-to-top" title="Back to top">‚¨ÜÔ∏è</a><h2>Availability</h2><p>Check availability using the calendar below.</p><p>We recommend booking early, especially during peak lavender season (mid-July to mid-August) and winter illumination and ski season (November to April).</p><div class="iframe-container" id="calendar-container"><div class="calendar-placeholder" id="calendar-placeholder"><div style="display: flex; align-items: center; justify-content: center; min-height: 450px; background: var(--calendar-bg); border: 1px solid var(--border-color); transition: background-color 0.3s ease, border-color 0.3s ease;"><div style="text-align: center; color: var(--text-secondary);"><div style="font-size: 24px; margin-bottom: 10px;">üìÖ</div><div>Loading availability calendar...</div></div></div></div></div></section><section id="section3b"><a href="#top" class="back-to-top" title="Back to top">‚¨ÜÔ∏è</a><h2>Direct Booking</h2><p style="text-align: center; margin-bottom: 30px;">Book directly through our reservation system for the best rates and instant confirmation.</p><div style="text-align: center;"><a href="https://worldwidebase.airhost.co/en/houses/527325" target="_blank" rel="noopener noreferrer" style="display: inline-block; background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; text-decoration: none; padding: 15px 30px; border-radius: 8px; font-size: 18px; font-weight: 600; box-shadow: 0 4px 12px rgba(0,0,0,0.15); transition: all 0.3s ease;">
üìÖ Check Availability & Book Now - Best Rate Guaranteed
</a></div><p style="font-size: 14px; color: var(--text-secondary); text-align: center; margin-top: 15px;">You'll be redirected to our secure booking platform to complete your reservation.</p><div style="margin-top: 40px; padding-top: 30px; border-top: 1px solid var(--border-color);"><h3 style="text-align: center; margin-bottom: 20px; font-size: 18px; color: var(--text-secondary);">Also Available On:</h3><div class="grid-container" style="max-width: 800px;"><div class="grid-item" style="text-align: center; padding: 6px 15px;"><strong><span style="color: #003580; font-weight: bold;">Booking</span><span style="color: #009fe3;">.com</span></strong><br><a href="https://www.booking.com/hotel/jp/maple-farm.html" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; display: inline-block; margin-top: 2px;">View listing ‚Üí</a></div><div class="grid-item" style="text-align: center; padding: 6px 15px;"><strong style="color: #5d53d0;">agoda</strong><br><a href="https://www.agoda.com/maple-farm/hotel/asahikawa-jp.html" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; display: inline-block; margin-top: 2px;">View listing ‚Üí</a></div><div class="grid-item" style="text-align: center; padding: 6px 15px;"><strong><span style="color: #287dfa;">Trip</span><span style="color: #333;">.com</span></strong><br><a href="https://www.trip.com/hotels/asahikawa-hotel-detail-89012514/maple-farm/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; display: inline-block; margin-top: 2px;">View listing ‚Üí</a></div><div class="grid-item" style="text-align: center; padding: 6px 15px;"><strong><span style="color: #d32323;">Hotels</span><span style="color: #333;">.com</span></strong><br><a href="https://in.hotels.com/ho2425491424/maple-farm-asahikawa-japan/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; display: inline-block; margin-top: 2px;">View listing ‚Üí</a></div><div class="grid-item" style="text-align: center; padding: 6px 15px;"><strong style="color: #ff5a5f;">airbnb</strong><br><a href="https://www.airbnb.com/l/GdMSJ1db" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; display: inline-block; margin-top: 2px;">View listing ‚Üí</a></div><div class="grid-item" style="text-align: center; padding: 6px 15px;"><strong style="color: #f55000;">Jalan</strong><br><a href="https://www.jalan.net/yad306179/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; display: inline-block; margin-top: 2px;">View listing ‚Üí</a></div><div class="grid-item" style="text-align: center; padding: 6px 15px;"><strong style="color: #bf0000;">Rakuten Travel</strong><br><a href="https://travel.rakuten.co.jp/HOTEL/171293/171293.html" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; display: inline-block; margin-top: 2px;">View listing ‚Üí</a></div></div><p style="text-align: center; margin-top: 20px; font-size: 13px; color: var(--text-secondary); font-style: italic;">
Note: Prices may vary between platforms. We recommend booking directly for the best rates and support.
</p></div></section><section id="section4"><a href="#top" class="back-to-top" title="Back to top">‚¨ÜÔ∏è</a><h2>Food & Drink</h2><div class="grid-container"><div class="grid-item"><strong>Asahikawa Airport Food Court</strong><p>Open 8am to 8pm every day, including weekends and holidays! Various dining options under one roof.</p><div style="margin-top: 10px;"><a href="https://www.hokkaido-airports.com/en/asahikawa/spend/#restaurant" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps?cid=12345" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Fried Chicken Stall</strong><p>Located next to Chiyugaoka Station for fresh, hot fried chicken. (Opening times are limited!) </p><div style="margin-top: 10px;"><a href="https://www.facebook.com/torimarutei/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://maps.app.goo.gl/ecnuLhYJo2mgDTxTA" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Asahikawa Ramen</strong><p>Try the famous shoyu-based ramen with its signature thin layer of oil. Visit Asahikawa Ramen Village with 8 renowned shops including Aoba, Tenkin, and Santoka.</p><div style="margin-top: 10px;"><a href="https://www.gltjp.com/en/directory/item/13921/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/asahikawa+ramen+village" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><!--
<div class="grid-item"><strong>Local Specialties</strong><p>Experience Jingisukan (grilled lamb on convex metal grills), Hokkaido soup curry, and fresh local seafood and vegetables. The region is renowned for its high-quality agricultural products.</p><div style="margin-top: 10px;"><a href="https://www.japan-guide.com/e/e2306.html" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/jingisukan+restaurant+asahikawa" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div>
--></div></section><section id="section4b"><a href="#top" class="back-to-top" title="Back to top">‚¨ÜÔ∏è</a><h2>Supermarkets</h2><div class="grid-container"><div class="grid-item"><strong>Lawson</strong><p>Convenience store located in the airport for quick snacks and essentials.</p><div style="margin-top: 10px;"><a href="https://www.hokkaido-airports.com/en/asahikawa/spend/shop/akj-lawson/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/7-eleven+asahikawa+airport" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Seicomart</strong><p>Convenience store next to Chiyugaoka Station, only 5 minutes drive away.</p><div style="margin-top: 10px;"><a href="https://store.seicomart.co.jp/detail.php?nbr=21523" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/seicomart+chiyugaoka+station+asahikawa" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Hokuren Shop Supermarket</strong><p>Full-service supermarket in Higashikawa. Fresh local produce, Hokkaido specialties, and hiking snacks. Perfect for stocking up on groceries and local products.</p><div style="margin-top: 10px;"><a href="https://www.hokurenshoji.co.jp/store/detail/304/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://maps.app.goo.gl/UzCPje6wHMDQMC22A" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>BestOM Higashikawa</strong><p>Large supermarket chain with wide selection. Fresh foods, daily necessities, and local products. Convenient shopping for extended stays and family needs.</p><div style="margin-top: 10px;"><a href="https://www.saijo-dp.co.jp/bestom_tenpo.html" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://maps.app.goo.gl/Tnh6o1NSCBJ9ZVc26" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>ARCS Supermarket</strong><p>Popular Hokkaido supermarket chain. Quality fresh produce, prepared foods, and household items. Well-stocked store serving the local community.</p><div style="margin-top: 10px;"><a href="https://www.douhoku-arcs.co.jp/store/detail/105404723.html?recordno=254" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://maps.app.goo.gl/wBn9VREZ8mELNAP47" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div></div></section><section id="section5"><a href="#top" class="back-to-top" title="Back to top">‚¨ÜÔ∏è</a><h2>Attractions</h2><div class="grid-container"><div class="grid-item"><strong>Blue Pond</strong><p>The world-famous cobalt-blue pond is just 15 minutes drive away. Features winter illuminations from December to February.</p><div style="margin-top: 10px;"><a href="https://www.visit-hokkaido.jp/en/spot/detail_10511.html" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps?cid=345959270472972190" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Patchwork Road</strong><p>Scenic route featuring the iconic Ken & Mary Tree, Seven Stars Tree, and colorful agricultural fields creating a beautiful patchwork landscape.</p><div style="margin-top: 10px;"><a href="https://www.klook.com/en-US/destination/p50188805-patchwork-biei/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/Ken+Mary+Tree+Biei+patchwork+road" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Asahiyama Zoo</strong><p>Famous for daily penguin walks during the Winter, interactive seal tanks, and up-close animal encounters, the zoo is only 20 minutes drive away.</p><div style="margin-top: 10px;"><a href="https://www.japan-guide.com/e/e6892.html" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/Asahiyama+Zoo+asahikawa" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Flower Fields</strong><p>Peak lavender season is from mid-July to mid-August. Shikisai Hill is only 20 minutes drive and has walking trails and tractor-pulled wagon rides.</p><div style="margin-top: 10px;"><a href="https://www.shikisainooka.jp/en/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/Shikisai+Hill+Biei+flower+field" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div></div></section><section id="section6"><a href="#top" class="back-to-top" title="Back to top">‚¨ÜÔ∏è</a><h2>Useful Info</h2><p><strong>Best Seasons:</strong><br>
Summer (July-August) for flower fields and mild weather. Winter (December-February) for skiiing, the Blue Pond illuminations and Asahikawa Winter Festival.</p><p><strong>Cultural Sites:</strong><br>
Asahikawa City Museum showcasing Ainu culture, Otokoyama Sake Brewery for tastings, and traditional Hokkaido handicraft shops.</p><p><strong>Weather:</strong><br>
Summer temperatures 15-35¬∞C (59-95¬∞F). Winter temperatures -15-10¬∞C (5-50¬∞F) with many days of powder snow and blue skies.</p></section><section id="section7"><a href="#top" class="back-to-top" title="Back to top">‚¨ÜÔ∏è</a><h2>Transport and Access</h2><p><strong>From Asahikawa Airport:</strong><br>
Taxi (5 minutes; &lt;&yen;1,500) or rental cars available at the airport.</p><p><strong>Getting Around:</strong><br>
Car rental recommended for maximum flexibility accessing remote attractions. Bicycle rentals available: 200 yen/hour regular, 600 yen/hour electric bikes.</p><p><strong>Key Distances By Car:</strong><br>
Blue Pond (15 min), Asahiyama Zoo (20 min), Furano (1h), Shikisai Hill (20 min).</p></section><section id="section8"><a href="#top" class="back-to-top" title="Back to top">‚¨ÜÔ∏è</a><h2>Ski Resorts</h2><div class="grid-container"><div class="grid-item"><strong>Kamui Ski Links (40 minutes)</strong><p>The closest ski resort to Maple Farm, featuring 25 courses across beginner to advanced levels. Known for excellent powder snow and night skiing until 9pm. Lift tickets: 4,500 yen/day adults.</p><div style="margin-top: 10px;"><a href="https://www.kamui-skilinks.com/en/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/Kamui+Ski+Links+asahikawa" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Asahidake (45 minutes)</strong><p>Japan's longest ski season (November to May) on Hokkaido's highest peak. Famous for deep powder, backcountry skiing, and stunning mountain views. Advanced terrain recommended for experienced skiers.</p><div style="margin-top: 10px;"><a href="https://asahidake.hokkaido.jp/en/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/Asahidake+ropeway+ski+hokkaido" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Kurodake (1 hour)</strong><p>Part of Daisetsuzan National Park with spectacular alpine scenery. Offers both groomed runs and off-piste opportunities. Connected to Asahidake via ropeway system for mountain exploration.</p><div style="margin-top: 10px;"><a href="https://www.rinyu.co.jp/kurodake/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/Kurodake+ropeway+daisetsuzan" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Canmore Ski Village (20 minutes)</strong><p>A smaller, family-friendly ski area perfect for beginners and intermediate skiers. Affordable lift tickets and relaxed atmosphere. Great for families with children learning to ski.</p><div style="margin-top: 10px;"><a href="https://www.canmore-ski.jp/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/Canmore+ski+village+Higashikawa" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Furano Ski Resort (1h 15min)</strong><p>Famous resort that hosted FIS World Cup races. Two ski areas (Kitanomine and Furano zones) with varied terrain. Known for excellent snow quality and beautiful views of the Tokachi mountain range.</p><div style="margin-top: 10px;"><a href="https://www.princehotels.com/en/ski/furano/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/Furano+ski+resort+hokkaido" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div></div></section><section id="section9"><a href="#top" class="back-to-top" title="Back to top">‚¨ÜÔ∏è</a><h2>Hot Springs</h2><div class="grid-container"><div class="grid-item"><strong>Kitoron (15 minutes)</strong><p>Modern spa designed by Kengo Kuma with panoramic views. Two unique saunas with auto-loyly, outdoor baths overlooking Higashikawa town. Free massage chairs and family-friendly facilities.</p><div style="margin-top: 10px;"><a href="https://www.higashikawa-kitoron.jp/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/Kitoron+Higashikawa+onsen" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Mori no Yu Hanakagura (20 minutes)</strong><p>Forest onsen with Daisetsuzan mountain views. Outdoor baths under starry skies, cottages with private hot springs. Near Asahikawa Airport and Zoo. Peaceful retreat in nature.</p><div style="margin-top: 10px;"><a href="https://www.morinoyu-hanakagura.com/onsen.html#main" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/Mori+no+Yu+Hanakagura+Higashikagura" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Shirogane Onsen (20 minutes)</strong><p>Beautiful hot spring village near Blue Pond. Known as "hot springs for beautiful skin" with 100% natural flowing water. Multiple hotels and day-trip bathing options available.</p><div style="margin-top: 10px;"><a href="https://www.shiroganeonsen.com/lg_en/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/Shirogane+Onsen+Biei" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Asahidake Onsen (45 minutes)</strong><p>Mountain hot springs at 1000m elevation on Hokkaido's highest peak. Rich in metasilicic acid for moisturizing skin. Access by ropeway with stunning mountain views.</p><div style="margin-top: 10px;"><a href="https://www.visit-hokkaido.jp/en/spa/spot/detail_10603.html" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/Asahidake+Onsen+hot+springs" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Takasago Onsen (25 minutes)</strong><p>Luxury onsen in Asahikawa city with private open-air baths. Traditional Japanese healing experience with city views. Convenient location with premium facilities.</p><div style="margin-top: 10px;"><a href="https://www.takasagoonsen.com/english/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/Takasago+Onsen+Asahikawa" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Sounkyo Onsen (1.5 hours)</strong><p>Famous hot spring resort at the base of Daisetsuzan mountains. Over 60 hot spring sources with unique scents and colors. Stunning gorge views and hiking trails.</p><div style="margin-top: 10px;"><a href="https://www.japan-guide.com/e/e6777.html" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://www.google.com/maps/search/Sounkyo+Onsen+hot+springs" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Manyo-no-Yu (30 minutes)</strong><p>Modern onsen facility in Asahikawa open 23 hours daily. Features rare Hutamata Radium waters unique to Hokkaido. Budget-friendly with overnight stay options.</p><div style="margin-top: 10px;"><a href="https://www.manyo.co.jp/asahikawa/eng/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://maps.app.goo.gl/Vyw66bjAdDk6LPGq8" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Tenninkyo Onsen (50 minutes)</strong><p>Historic 1897 onsen in dramatic gorge setting near Hagoromo Falls. Natural flowing springs rich in minerals for beautiful skin. Peaceful retreat in Daisetsuzan National Park.</p><div style="margin-top: 10px;"><a href="https://www.japan-guide.com/e/e6778.html" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://maps.app.goo.gl/5n2nmATN5Jj95MU48" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div><div class="grid-item"><strong>Tokachidake Onsen (1 hour)</strong><p>Hokkaido's highest onsen at 1,280m elevation. Famous rust-colored waters with volcanic mountain views. Day trips 8am-8pm, 1000 yen. Perfect after skiing at nearby Kamui.</p><div style="margin-top: 10px;"><a href="https://www.japan-guide.com/e/e6782.html" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px; margin-right: 10px;">More ‚Üí</a><a href="https://maps.app.goo.gl/THK1nNCXomxxPXSy8" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 12px;">Map ‚Üí</a></div></div></div></section><section id="section10"><a href="#top" class="back-to-top" title="Back to top">‚¨ÜÔ∏è</a><h2>About Maple Farm</h2><p>Maple Farm offers comfortable accommodation in the heart of Hokkaido's most scenic region. Located just minutes from Asahikawa Airport and Biei's famous attractions, our property provides the perfect blend of convenience and tranquility.</p><p>Whether you're here for the summer flower fields, winter illuminations, or year-round cultural experiences, Maple Farm serves as your ideal base for exploring all that this beautiful region has to offer.</p></section><footer class="footer"><p>&copy; 2020-2025 Maple Farm. All rights reserved.</p><p style="font-size: 12px; opacity: 0.75; margin-top: 6px;">Build 6d4d834 (2025-09-10)</p></footer></div></div><script>
let currentSlide = 0;
const slides = document.querySelectorAll('.carousel-images img');
let imagesLoaded = new Set([0]); // First image is already loaded
// Load an image from data-src
function loadCarouselImage(img, index) {
if (img.dataset.src && !img.src) {
img.src = img.dataset.src;
img.onload = () => {
imagesLoaded.add(index);
};
img.onerror = () => {
console.warn(`Failed to load carousel image: ${img.dataset.src}`);
};
}
}
// Preload current and adjacent images for smooth navigation
function preloadAdjacentImages(currentIndex) {
const indicesToLoad = [
currentIndex - 1 >= 0 ? currentIndex - 1 : slides.length - 1, // Previous
currentIndex, // Current
currentIndex + 1 < slides.length ? currentIndex + 1 : 0 // Next
];
indicesToLoad.forEach(index => {
if (!imagesLoaded.has(index)) {
loadCarouselImage(slides[index], index);
}
});
}
function showSlide(index) {
if (index >= slides.length) currentSlide = 0;
if (index < 0) currentSlide = slides.length - 1;
// Load current and adjacent images
preloadAdjacentImages(currentSlide);
const offset = -currentSlide * 100;
document.querySelector('.carousel-images').style.transform = `translateX(${offset}%)`;
}
function nextSlide() {
currentSlide++;
showSlide(currentSlide);
}
function prevSlide() {
currentSlide--;
showSlide(currentSlide);
}
// Progressive loading of remaining carousel images
function startCarouselProgressiveLoading() {
let loadIndex = 3; // Start after preloaded images (0, 1, 2)
function loadNextBatch() {
const batchSize = 3;
let loaded = 0;
for (let i = 0; i < batchSize && loadIndex < slides.length; i++, loadIndex++) {
if (!imagesLoaded.has(loadIndex)) {
loadCarouselImage(slides[loadIndex], loadIndex);
loaded++;
}
}
if (loadIndex < slides.length) {
setTimeout(loadNextBatch, 2000); // Load next batch after 2 seconds
}
}
// Start progressive loading after page is fully loaded
setTimeout(loadNextBatch, 3000);
}
// Lazy load calendar
function loadCalendar() {
const placeholder = document.getElementById('calendar-placeholder');
const iframe = document.createElement('iframe');
const isMobile = window.innerWidth <= 600;
const height = isMobile ? 400 : 650;
const timestamp = Date.now();
iframe.src = `https://calendar.google.com/calendar/embed?height=${height}&wkst=2&ctz=Asia%2FTokyo&showPrint=0&showCalendars=0&mode=MONTH&showTabs=0&showNav=1&showDate=1&showTitle=1&title=Maple%20Farm%20Availability&src=ZW4uamFwYW5lc2UjaG9saWRheUBncm91cC52LmNhbGVuZGFyLmdvb2dsZS5jb20&src=bmZocjRmMGdicThpZmxqMHNpZnRtbWQyYjBoNnJvczlAaW1wb3J0LmNhbGVuZGFyLmdvb2dsZS5jb20&color=%230B8043&color=%23795548&_=${timestamp}`;
iframe.style.cssText = `border:solid 1px #777; width:100%; height:${height}px;`;
iframe.frameBorder = '0';
iframe.scrolling = 'yes';
placeholder.parentNode.replaceChild(iframe, placeholder);
console.log('Calendar loaded with height:', height, 'Mobile:', isMobile);
}
// Background loading with idle callback
let calendarLoaded = false;
let mapLoaded = false;
function loadMapInBackground() {
if (mapLoaded) return;
// Map is already embedded in HTML, just mark as loaded
mapLoaded = true;
console.log('Map marked as loaded');
}
function loadCalendarInBackground() {
if (calendarLoaded) return;
loadCalendar();
calendarLoaded = true;
console.log('Calendar loaded in background');
}
function scheduleBackgroundLoading() {
// Use requestIdleCallback for low priority loading, fallback to setTimeout
const scheduleIdle = window.requestIdleCallback || ((cb) => setTimeout(cb, 1));
// Load map first (lighter weight - already in HTML)
scheduleIdle(() => {
loadMapInBackground();
});
// Load calendar after a delay (heavier weight)
scheduleIdle(() => {
setTimeout(() => {
loadCalendarInBackground();
}, 2000); // Wait 2 seconds after idle
});
}
// Intersection Observer for immediate loading when viewed (fallback)
const calendarObserver = new IntersectionObserver((entries) => {
entries.forEach(entry => {
if (entry.isIntersecting && !calendarLoaded) {
loadCalendar();
calendarLoaded = true;
calendarObserver.unobserve(entry.target);
}
});
}, { rootMargin: '100px' });
// Dark mode toggle functionality
function toggleDarkMode() {
const html = document.documentElement;
const toggleButton = document.getElementById('darkModeToggle');
if (html.getAttribute('data-theme') === 'dark') {
html.removeAttribute('data-theme');
toggleButton.textContent = 'üåô';
localStorage.setItem('theme', 'light');
} else {
html.setAttribute('data-theme', 'dark');
toggleButton.textContent = '‚òÄÔ∏è';
localStorage.setItem('theme', 'dark');
}
}
// Initialize dark mode from localStorage
function initDarkMode() {
const savedTheme = localStorage.getItem('theme');
const toggleButton = document.getElementById('darkModeToggle');
const html = document.documentElement;
if (savedTheme === 'dark') {
html.setAttribute('data-theme', 'dark');
toggleButton.textContent = '‚òÄÔ∏è';
} else {
html.removeAttribute('data-theme');
toggleButton.textContent = 'üåô';
}
}
// Hamburger menu toggle
function toggleMenu() {
const hamburger = document.getElementById('hamburger');
const navLinks = document.getElementById('navLinks');
hamburger.classList.toggle('active');
navLinks.classList.toggle('active');
}
// Smooth scrolling for navigation links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
anchor.addEventListener('click', function (e) {
e.preventDefault();
const target = document.querySelector(this.getAttribute('href'));
if (target) {
target.scrollIntoView({
behavior: 'smooth',
block: 'start'
});
// Close mobile menu after clicking
if (window.innerWidth <= 600) {
document.getElementById('hamburger').classList.remove('active');
document.getElementById('navLinks').classList.remove('active');
}
}
});
});
// Active section highlighting
function updateActiveNav() {
const sections = document.querySelectorAll('section');
const navLinks = document.querySelectorAll('nav a');
let current = '';
sections.forEach(section => {
const sectionTop = section.offsetTop;
const sectionHeight = section.clientHeight;
if (window.pageYOffset >= (sectionTop - 200)) {
current = section.getAttribute('id');
}
});
navLinks.forEach(link => {
link.style.backgroundColor = '';
if (link.getAttribute('href').slice(1) === current) {
link.style.backgroundColor = 'var(--nav-active)';
}
});
}
window.addEventListener('scroll', updateActiveNav);
// Keyboard navigation for carousel
document.addEventListener('keydown', (e) => {
// Only work if carousel is visible on screen
const carousel = document.querySelector('.carousel');
if (carousel) {
const rect = carousel.getBoundingClientRect();
const isVisible = rect.top < window.innerHeight && rect.bottom > 0;
if (isVisible) {
if (e.key === 'ArrowLeft') {
prevSlide();
} else if (e.key === 'ArrowRight') {
nextSlide();
}
}
}
});
// Touch/swipe navigation for carousel
let touchStartX = 0;
let touchEndX = 0;
function handleTouchStart(e) {
touchStartX = e.changedTouches[0].screenX;
}
function handleTouchEnd(e) {
touchEndX = e.changedTouches[0].screenX;
handleSwipe();
}
function handleSwipe() {
const swipeThreshold = 50; // Minimum distance for swipe
const swipeDistance = touchEndX - touchStartX;
if (Math.abs(swipeDistance) > swipeThreshold) {
if (swipeDistance > 0) {
// Swipe right - go to previous image
prevSlide();
} else {
// Swipe left - go to next image
nextSlide();
}
}
}
// Trackpad/mouse wheel navigation for carousel with inertia control
let wheelAccumulator = 0;
let wheelTimeout = null;
let isWheelCooldown = false;
const wheelThreshold = 300; // Much higher threshold - need significant scroll to trigger
function handleWheel(e) {
// Only work if carousel is visible on screen
const carousel = document.querySelector('.carousel');
if (carousel) {
const rect = carousel.getBoundingClientRect();
const isVisible = rect.top < window.innerHeight && rect.bottom > 0;
if (isVisible) {
// Only handle horizontal scrolling (deltaX), ignore vertical (deltaY)
if (Math.abs(e.deltaX) > Math.abs(e.deltaY)) {
e.preventDefault(); // Only prevent page scroll for horizontal movements
// Skip if we're in cooldown period
if (isWheelCooldown) {
return;
}
// Only use horizontal delta for carousel navigation
const delta = e.deltaX * 0.5; // Reduce sensitivity by half
wheelAccumulator += delta;
// Clear existing timeout
if (wheelTimeout) {
clearTimeout(wheelTimeout);
}
// Check if we've accumulated enough scroll to trigger a slide
if (Math.abs(wheelAccumulator) >= wheelThreshold) {
if (wheelAccumulator > 0) {
// Scroll right - next image
nextSlide();
} else {
// Scroll left - previous image
prevSlide();
}
// Reset everything and enter cooldown
wheelAccumulator = 0;
isWheelCooldown = true;
// Long cooldown period to prevent multiple slides
setTimeout(() => {
isWheelCooldown = false;
}, 800);
} else {
// Reset accumulator if no scroll for 300ms (longer timeout)
wheelTimeout = setTimeout(() => {
wheelAccumulator = 0;
}, 300);
}
}
}
}
}
// Analytics System - Enhanced Data Collection
const Analytics = {
data: [],
sessionId: Math.random().toString(36).substr(2, 9),
startTime: Date.now(),
// Collect comprehensive device and browser info
getDeviceInfo() {
return {
// Screen & Display
screenSize: `${screen.width}x${screen.height}`,
viewport: `${window.innerWidth}x${window.innerHeight}`,
colorDepth: screen.colorDepth,
pixelRatio: window.devicePixelRatio || 1,
// Browser & Platform
userAgent: navigator.userAgent,
platform: navigator.platform,
language: navigator.language,
languages: navigator.languages?.join(', ') || navigator.language,
cookieEnabled: navigator.cookieEnabled,
onLine: navigator.onLine,
// Time & Location
timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
timezoneOffset: new Date().getTimezoneOffset(),
// Performance
memory: navigator.deviceMemory || 'unknown',
hardwareConcurrency: navigator.hardwareConcurrency || 'unknown',
// Connection
connection: this.getConnectionInfo(),
// Additional Browser Features
doNotTrack: navigator.doNotTrack,
touchSupport: 'ontouchstart' in window || navigator.maxTouchPoints > 0,
webGL: this.getWebGLInfo()
};
},
getConnectionInfo() {
const conn = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
if (!conn) return 'unknown';
return {
effectiveType: conn.effectiveType || 'unknown',
downlink: conn.downlink || 'unknown',
rtt: conn.rtt || 'unknown',
saveData: conn.saveData || false
};
},
getWebGLInfo() {
try {
const canvas = document.createElement('canvas');
const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
if (!gl) return 'not-supported';
return {
vendor: gl.getParameter(gl.VENDOR),
renderer: gl.getParameter(gl.RENDERER)
};
} catch (e) {
return 'unknown';
}
},
// Extract search terms from referrer
getSearchTerms(referrer) {
if (!referrer) return null;
try {
const url = new URL(referrer);
const searchParams = url.searchParams;
// Google search terms
if (url.hostname.includes('google')) {
return searchParams.get('q') || 'google-search-no-terms';
}
// Bing search terms
if (url.hostname.includes('bing')) {
return searchParams.get('q') || 'bing-search-no-terms';
}
// Yahoo search terms
if (url.hostname.includes('yahoo')) {
return searchParams.get('p') || 'yahoo-search-no-terms';
}
// DuckDuckGo
if (url.hostname.includes('duckduckgo')) {
return searchParams.get('q') || 'duckduckgo-search-no-terms';
}
// Social media platforms
if (url.hostname.includes('facebook')) return 'facebook-referral';
if (url.hostname.includes('twitter') || url.hostname.includes('x.com')) return 'twitter-referral';
if (url.hostname.includes('instagram')) return 'instagram-referral';
if (url.hostname.includes('youtube')) return 'youtube-referral';
if (url.hostname.includes('baidu')) return searchParams.get('wd') || 'baidu-search-no-terms';
return `${url.hostname}-referral`;
} catch (e) {
return 'direct-or-unknown';
}
},
// Track page performance
getPagePerformance() {
if (!window.performance) return null;
const perf = performance.getEntriesByType('navigation')[0];
if (!perf) {
// Fallback for older browsers
return {
loadTime: Date.now() - this.startTime,
domContentLoaded: Date.now() - this.startTime,
firstPaint: this.getFirstPaint(),
pageSize: document.documentElement.innerHTML.length
};
}
return {
loadTime: Math.round(perf.loadEventEnd - perf.navigationStart) || 0,
domContentLoaded: Math.round(perf.domContentLoadedEventEnd - perf.navigationStart) || 0,
firstPaint: this.getFirstPaint(),
pageSize: document.documentElement.innerHTML.length
};
},
getFirstPaint() {
const paintEntries = performance.getEntriesByType('paint');
const firstPaint = paintEntries.find(entry => entry.name === 'first-paint');
return firstPaint ? Math.round(firstPaint.startTime) : null;
},
// Get client IP and location data
async getClientIPAndLocation() {
try {
// Use ipapi.co for client-side IP detection
const response = await fetch('https://ipapi.co/json/', {
timeout: 3000
});
const data = await response.json();
return {
clientIP: data.ip || 'unknown',
country: data.country_name || 'unknown',
region: data.region || 'unknown',
city: data.city || 'unknown',
isp: data.org || 'unknown',
coordinates: data.latitude && data.longitude ?
`${data.latitude},${data.longitude}` : 'unknown'
};
} catch (error) {
console.warn('IP lookup failed:', error);
return {
clientIP: 'lookup-failed',
country: 'unknown',
region: 'unknown',
city: 'unknown',
isp: 'unknown',
coordinates: 'unknown'
};
}
},
track(event, data = {}) {
// Security and privacy checks
if (!this.shouldTrack()) {
return; // Respect privacy settings
}
if (!this.rateLimiter.checkLimit()) {
return; // Client-side rate limiting
}
const config = window.ANALYTICS_CONFIG || {};
// Collect data based on configuration
let deviceInfo = {};
let performance = null;
if (config.enableDetailedDeviceInfo !== false) {
deviceInfo = this.getDeviceInfo();
}
if (config.enablePerformanceTracking !== false) {
performance = this.getPagePerformance();
}
const searchTerms = this.getSearchTerms(document.referrer);
const entry = {
// Event Info
event: event,
timestamp: Date.now(),
sessionId: this.sessionId,
// Authentication token (required by server)
authToken: config.authToken || 'maple-farm-2024-analytics',
// Page Info
url: window.location.href,
referrer: document.referrer || 'direct',
searchTerms: searchTerms,
// Device & Browser (based on config)
...deviceInfo,
// Performance (if enabled)
performance: performance,
// Custom event data
...data
};
this.data.push(entry);
if (config.debug) {
console.log('Analytics:', entry);
}
// Auto-flush when buffer gets large
const bufferSize = config.maxBufferSize || 5;
if (this.data.length >= bufferSize) {
this.flush();
}
},
// Client-side rate limiting
rateLimiter: {
events: [],
checkLimit() {
const now = Date.now();
const oneMinuteAgo = now - 60000;
// Clean old events
this.events = this.events.filter(timestamp => timestamp > oneMinuteAgo);
const config = window.ANALYTICS_CONFIG || {};
const limit = config.maxEventsPerMinute || 20;
if (this.events.length >= limit) {
console.warn('Analytics: Rate limit exceeded, dropping events');
return false;
}
this.events.push(now);
return true;
}
},
// Privacy check
shouldTrack() {
const config = window.ANALYTICS_CONFIG || {};
// Respect Do Not Track
if (config.respectDoNotTrack && navigator.doNotTrack === '1') {
return false;
}
// Check if analytics is configured
if (!config.endpoint || config.endpoint.includes('YOUR_')) {
console.warn('Analytics: Endpoint not configured, using fallback');
return true; // Allow fallback for testing
}
return true;
},
// Secure data sanitization
sanitizeData(data) {
const sanitized = {...data};
// Remove potentially sensitive data
if (sanitized.userAgent) {
// Keep only essential browser info, remove detailed version numbers
sanitized.userAgent = sanitized.userAgent.replace(/[\d.]+/g, 'X.X');
}
// Limit URL parameters (remove potential PII)
if (sanitized.url) {
try {
const url = new URL(sanitized.url);
// Keep only essential params, remove others
const allowedParams = ['utm_source', 'utm_medium', 'utm_campaign'];
const newParams = new URLSearchParams();
allowedParams.forEach(param => {
if (url.searchParams.has(param)) {
newParams.set(param, url.searchParams.get(param));
}
});
url.search = newParams.toString();
sanitized.url = url.toString();
} catch (e) {
// Keep original if URL parsing fails
}
}
return sanitized;
},
flush() {
if (this.data.length === 0) return;
const config = window.ANALYTICS_CONFIG || {};
const endpoint = config.endpoint || config.fallbackEndpoint || 'https://httpbin.org/post';
// Copy and clear buffer first; re-queue on failure
const queue = this.data.slice();
this.data = [];
// Sanitize data before sending
const sanitizedData = queue.map(entry => this.sanitizeData(entry));
const payload = JSON.stringify(sanitizedData);
if (config.debug) {
console.log('Analytics: Sending data to', endpoint, sanitizedData);
}
// Prefer sendBeacon for reliability on mobile/background
if (navigator.sendBeacon) {
const ok = navigator.sendBeacon(endpoint, payload);
if (!ok) {
// re-queue if the browser refused to send
this.data = queue.concat(this.data);
}
return ok;
}
// Fallback: use a CORS-simple POST with keepalive
return fetch(endpoint, {
method: 'POST',
body: payload,
headers: {
// text/plain avoids preflight; server still receives JSON string
'Content-Type': 'text/plain'
},
// allow sending during page unload on mobile
keepalive: true,
// we don't need to read the response; this avoids CORS failures surfacing
mode: 'no-cors'
}).then(() => true).catch(error => {
if (config.debug) {
console.warn('Analytics: Send failed', error);
}
// re-queue on network error
this.data = queue.concat(this.data);
return false;
});
},
init() {
// Get client IP and location data
this.getClientIPAndLocation().then(locationData => {
// Track initial page view with referrer info and location
this.track('page_view', {
referrer: document.referrer,
loadTime: Date.now() - this.startTime,
...locationData
});
// Flush early to capture quick mobile bounces
this.flush();
});
// Fallback if IP lookup fails
setTimeout(() => {
if (this.data.length === 0) {
this.track('page_view', {
referrer: document.referrer,
loadTime: Date.now() - this.startTime
});
}
}, 2000);
this.setupSectionTracking();
this.setupCarouselTracking();
this.setupBookingTracking();
this.setupUniversalClickTracking();
// Flush data before user leaves (desktop)
window.addEventListener('beforeunload', () => this.flush());
// More reliable on mobile browsers
window.addEventListener('pagehide', () => this.flush());
document.addEventListener('visibilitychange', () => {
if (document.visibilityState === 'hidden') this.flush();
}, { capture: true });
// Periodic flush every 30 seconds
setInterval(() => this.flush(), 30000);
}
};
// Section view tracking using IntersectionObserver
const sectionObserver = new IntersectionObserver((entries) => {
entries.forEach(entry => {
if (entry.isIntersecting && entry.intersectionRatio > 0.5) {
// Only track once per session per section
const sectionId = entry.target.id;
if (!Analytics.viewedSections) Analytics.viewedSections = new Set();
if (!Analytics.viewedSections.has(sectionId)) {
Analytics.viewedSections.add(sectionId);
Analytics.track('section_view', {
section: sectionId,
sectionName: entry.target.querySelector('h2')?.textContent || sectionId,
scrollTriggered: true
});
}
}
});
}, { threshold: 0.5, rootMargin: '-10% 0px -10% 0px' });
Analytics.setupSectionTracking = () => {
document.querySelectorAll('section[id]').forEach(section => {
sectionObserver.observe(section);
});
};
Analytics.setupCarouselTracking = () => {
const carousel = document.querySelector('.carousel');
if (!carousel) return;
let carouselInteractions = 0;
const trackCarouselView = () => {
Analytics.track('carousel_view', {
imageIndex: currentSlide,
imageName: slides[currentSlide]?.alt || `image-${currentSlide}`,
totalImages: slides.length
});
};
// Track carousel navigation
carousel.querySelector('.next')?.addEventListener('click', () => {
carouselInteractions++;
trackCarouselView();
});
carousel.querySelector('.prev')?.addEventListener('click', () => {
carouselInteractions++;
trackCarouselView();
});
};
Analytics.setupBookingTracking = () => {
// Track clicks on all booking platform links
document.querySelectorAll('a[href*="booking"], a[href*="airbnb"], a[href*="agoda"], a[href*="trip.com"], a[href*="hotels.com"], a[href*="worldwidebase.airhost.co"], a[href*="jalan.net"], a[href*="rakuten"]').forEach(link => {
link.addEventListener('click', () => {
const hostname = new URL(link.href).hostname;
Analytics.track('booking_click', {
platform: hostname,
linkText: link.textContent.trim()
});
});
});
};
// Universal click tracking - tracks EVERY click on the site
Analytics.setupUniversalClickTracking = () => {
document.addEventListener('click', (event) => {
const element = event.target;
const tagName = element.tagName.toLowerCase();
// Get click context
const clickData = {
tagName: tagName,
className: element.className || '',
id: element.id || '',
textContent: element.textContent?.trim().substring(0, 100) || '',
href: element.href || '',
x: event.clientX,
y: event.clientY,
timestamp: Date.now()
};
// Categorize click types
if (element.href) {
if (element.href.includes('#')) {
// Navigation clicks
Analytics.track('nav_click', {
...clickData,
clickType: 'navigation',
targetSection: element.href.split('#')[1]
});
} else {
// External links
Analytics.track('external_link_click', {
...clickData,
clickType: 'external_link',
domain: new URL(element.href).hostname
});
}
} else if (tagName === 'button') {
// Button clicks
Analytics.track('button_click', {
...clickData,
clickType: 'button',
buttonType: element.className.includes('carousel') ? 'carousel' :
element.className.includes('toggle') ? 'toggle' : 'other'
});
} else if (tagName === 'img') {
// Image clicks
Analytics.track('image_click', {
...clickData,
clickType: 'image',
src: element.src || '',
alt: element.alt || ''
});
} else {
// Generic clicks
Analytics.track('generic_click', {
...clickData,
clickType: 'generic'
});
}
});
};
// Initialize
document.addEventListener('DOMContentLoaded', () => {
initDarkMode(); // Initialize dark mode first
showSlide(currentSlide);
// Start carousel lazy loading
preloadAdjacentImages(0); // Load first few images immediately
startCarouselProgressiveLoading(); // Start background loading
// Set up intersection observer as fallback
const calendarContainer = document.getElementById('calendar-container');
if (calendarContainer) {
calendarObserver.observe(calendarContainer);
}
updateActiveNav();
// Add touch and wheel listeners to carousel
const carousel = document.querySelector('.carousel');
if (carousel) {
carousel.addEventListener('touchstart', handleTouchStart, { passive: true });
carousel.addEventListener('touchend', handleTouchEnd, { passive: true });
carousel.addEventListener('wheel', handleWheel, { passive: false });
}
// Schedule background loading after initial page load
scheduleBackgroundLoading();
// Initialize Analytics
Analytics.init();
});
// Analytics Configuration - Inline
window.ANALYTICS_CONFIG = {
// Analytics endpoint - replace with your actual Google Apps Script URL
endpoint: 'https://script.google.com/macros/s/AKfycbzgcm66dSglnyM6RYReBRC1yWXxYB3nmpZ4xucHXQsjOmaq49bPLgMtvrCNN2ZaSjR_MQ/exec',
// Authentication token - MUST match server-side CONFIG.AUTH_TOKEN
authToken: 'maple-farm-2024-analytics',
// Site configuration
siteDomain: 'maple-farm.com',
// Feature flags
enableGeolocation: true,
enablePerformanceTracking: true,
enableDetailedDeviceInfo: true,
// Client-side rate limiting (backup)
maxEventsPerMinute: 20,
// Debug mode (shows console logs)
debug: true,
// Buffer settings
maxBufferSize: 5,
flushIntervalMs: 30000,
// Privacy settings
respectDoNotTrack: true,
// Fallback endpoint for testing
fallbackEndpoint: 'https://httpbin.org/post'
};
</script></body></html>

